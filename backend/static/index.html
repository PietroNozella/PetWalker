<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üêï PetWalker - Gest√£o de Passeios e Adestramento</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0f0f1a;
            --bg-secondary: #1a1a2e;
            --bg-card: #252540;
            --bg-hover: #2d2d4a;
            --accent-orange: #ff7b54;
            --accent-coral: #ff6b6b;
            --accent-mint: #4ecdc4;
            --accent-yellow: #ffd93d;
            --text-primary: #ffffff;
            --text-secondary: #a8a8b3;
            --text-muted: #6c6c7d;
            --border-color: #3d3d5c;
            --success: #00c48c;
            --warning: #ffaa00;
            --danger: #ff5252;
            --gradient-1: linear-gradient(135deg, #ff7b54 0%, #ff6b6b 100%);
            --gradient-2: linear-gradient(135deg, #4ecdc4 0%, #2dbdb4 100%);
            --shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            --radius: 16px;
            --radius-sm: 10px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            background-image: 
                radial-gradient(ellipse at 20% 20%, rgba(255, 123, 84, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(78, 205, 196, 0.08) 0%, transparent 50%);
        }

        /* ============ LOGIN PAGE ============ */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .login-box {
            background: var(--bg-secondary);
            border-radius: var(--radius);
            padding: 50px 40px;
            width: 100%;
            max-width: 420px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }

        .login-logo {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-logo .icon {
            font-size: 60px;
            margin-bottom: 10px;
            display: block;
        }

        .login-logo h1 {
            font-size: 28px;
            font-weight: 800;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .login-logo p {
            color: var(--text-secondary);
            margin-top: 5px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid var(--border-color);
            border-radius: var(--radius-sm);
            background: var(--bg-card);
            color: var(--text-primary);
            font-size: 15px;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--accent-orange);
            box-shadow: 0 0 0 4px rgba(255, 123, 84, 0.15);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 28px;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 15px;
            font-weight: 700;
            font-family: inherit;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--gradient-1);
            color: white;
            width: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 123, 84, 0.3);
        }

        .btn-secondary {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--bg-hover);
            border-color: var(--accent-mint);
        }

        .btn-success {
            background: var(--gradient-2);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 13px;
        }

        /* ============ DASHBOARD ============ */
        .app-container {
            display: none;
        }

        .app-container.active {
            display: block;
        }

        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            width: 260px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            padding: 24px 0;
            z-index: 100;
        }

        .sidebar-logo {
            padding: 0 24px 30px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .sidebar-logo .icon {
            font-size: 36px;
        }

        .sidebar-logo h2 {
            font-size: 20px;
            font-weight: 800;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .sidebar-nav {
            padding: 20px 12px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 16px;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: var(--radius-sm);
            margin-bottom: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 600;
        }

        .nav-item:hover {
            background: var(--bg-card);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: var(--gradient-1);
            color: white;
        }

        .nav-item .nav-icon {
            font-size: 20px;
        }

        .sidebar-footer {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px 24px;
            border-top: 1px solid var(--border-color);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient-1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .user-name {
            font-weight: 600;
            font-size: 14px;
        }

        .user-role {
            font-size: 12px;
            color: var(--text-muted);
        }

        .main-content {
            margin-left: 260px;
            padding: 30px 40px;
            min-height: 100vh;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .page-title {
            font-size: 28px;
            font-weight: 800;
        }

        .page-title span {
            opacity: 0.5;
            font-weight: 400;
        }

        /* ============ STATS CARDS ============ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--bg-secondary);
            border-radius: var(--radius);
            padding: 24px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow);
        }

        .stat-icon {
            font-size: 32px;
            margin-bottom: 12px;
        }

        .stat-value {
            font-size: 36px;
            font-weight: 800;
            margin-bottom: 4px;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
        }

        .stat-card.orange { border-top: 4px solid var(--accent-orange); }
        .stat-card.coral { border-top: 4px solid var(--accent-coral); }
        .stat-card.mint { border-top: 4px solid var(--accent-mint); }
        .stat-card.yellow { border-top: 4px solid var(--accent-yellow); }

        /* ============ DATA TABLE ============ */
        .data-section {
            background: var(--bg-secondary);
            border-radius: var(--radius);
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-color);
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th, .data-table td {
            padding: 16px 24px;
            text-align: left;
        }

        .data-table th {
            background: var(--bg-card);
            color: var(--text-secondary);
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .data-table td {
            border-bottom: 1px solid var(--border-color);
        }

        .data-table tr:hover td {
            background: var(--bg-hover);
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-success { background: rgba(0, 196, 140, 0.15); color: var(--success); }
        .badge-warning { background: rgba(255, 170, 0, 0.15); color: var(--warning); }
        .badge-danger { background: rgba(255, 82, 82, 0.15); color: var(--danger); }
        .badge-info { background: rgba(78, 205, 196, 0.15); color: var(--accent-mint); }

        .action-btns {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            border: none;
            background: var(--bg-card);
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .action-btn:hover {
            background: var(--accent-orange);
            color: white;
        }

        .action-btn.delete:hover {
            background: var(--danger);
        }

        /* ============ MODAL ============ */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            z-index: 200;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--bg-secondary);
            border-radius: var(--radius);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .modal-close {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            border: none;
            background: var(--bg-card);
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 18px;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: var(--danger);
            color: white;
        }

        .modal-body {
            padding: 24px;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            padding: 20px 24px;
            border-top: 1px solid var(--border-color);
        }

        /* ============ PET PROFILE PUBLIC ============ */
        .pet-profile-container {
            display: none;
            min-height: 100vh;
            padding: 40px 20px;
        }

        .pet-profile-container.active {
            display: block;
        }

        .pet-profile {
            max-width: 800px;
            margin: 0 auto;
        }

        .pet-header {
            background: var(--bg-secondary);
            border-radius: var(--radius);
            padding: 40px;
            text-align: center;
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .pet-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 120px;
            background: var(--gradient-1);
            opacity: 0.2;
        }

        .pet-avatar {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background: var(--bg-card);
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 70px;
            border: 4px solid var(--accent-orange);
            position: relative;
            overflow: hidden;
        }

        .pet-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .pet-name {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 8px;
        }

        .pet-breed {
            color: var(--text-secondary);
            font-size: 16px;
        }

        .pet-details {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .pet-detail {
            text-align: center;
        }

        .pet-detail-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--accent-mint);
        }

        .pet-detail-label {
            font-size: 13px;
            color: var(--text-muted);
        }

        .pet-section {
            background: var(--bg-secondary);
            border-radius: var(--radius);
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .pet-section-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-color);
            font-size: 18px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pet-section-body {
            padding: 24px;
        }

        .schedule-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: var(--bg-card);
            border-radius: var(--radius-sm);
            margin-bottom: 12px;
        }

        .schedule-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: var(--gradient-1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .schedule-icon.training {
            background: var(--gradient-2);
        }

        .schedule-info {
            flex: 1;
        }

        .schedule-date {
            font-weight: 700;
            margin-bottom: 4px;
        }

        .schedule-details {
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* Media Gallery */
        .media-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 16px;
        }

        .media-item {
            aspect-ratio: 1;
            border-radius: var(--radius-sm);
            overflow: hidden;
            background: var(--bg-card);
            position: relative;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .media-item:hover {
            transform: scale(1.02);
        }

        .media-item img, .media-item video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .media-play-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: var(--text-muted);
        }

        .empty-state .icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        /* ============ FILE UPLOAD ============ */
        .file-upload {
            border: 2px dashed var(--border-color);
            border-radius: var(--radius-sm);
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload:hover {
            border-color: var(--accent-orange);
            background: rgba(255, 123, 84, 0.05);
        }

        .file-upload-icon {
            font-size: 40px;
            margin-bottom: 12px;
            opacity: 0.6;
        }

        .file-upload-text {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .file-upload input {
            display: none;
        }

        /* ============ COPY LINK ============ */
        .copy-link {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .copy-link input {
            flex: 1;
            padding: 10px 14px;
            border: 2px solid var(--border-color);
            border-radius: var(--radius-sm);
            background: var(--bg-card);
            color: var(--text-primary);
            font-size: 13px;
        }

        /* ============ TOAST ============ */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 300;
        }

        .toast {
            background: var(--bg-card);
            border-radius: var(--radius-sm);
            padding: 16px 20px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            animation: slideIn 0.3s ease;
        }

        .toast.success { border-left: 4px solid var(--success); }
        .toast.error { border-left: 4px solid var(--danger); }
        .toast.warning { border-left: 4px solid var(--warning); }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* ============ RESPONSIVE ============ */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .main-content {
                margin-left: 0;
                padding: 20px;
            }

            .page-header {
                flex-direction: column;
                gap: 16px;
                align-items: flex-start;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .data-table {
                font-size: 14px;
            }

            .data-table th, .data-table td {
                padding: 12px 16px;
            }
        }
    </style>
</head>
<body>
    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Login Page -->
    <div class="login-container" id="loginPage">
        <div class="login-box">
            <div class="login-logo">
                <span class="icon">üêï</span>
                <h1>PetWalker</h1>
                <p>Gest√£o de Passeios e Adestramento</p>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" placeholder="seu@email.com" required>
                </div>
                <div class="form-group">
                    <label>Senha</label>
                    <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                </div>
                <button type="submit" class="btn btn-primary">
                    <span>üîë</span> Entrar
                </button>
            </form>
            <p style="text-align: center; margin-top: 20px; color: var(--text-muted); font-size: 13px;">
                Acesso padr√£o: admin@petwalker.com / admin123
            </p>
        </div>
    </div>

    <!-- Dashboard App -->
    <div class="app-container" id="appContainer">
        <aside class="sidebar">
            <div class="sidebar-logo">
                <span class="icon">üêï</span>
                <h2>PetWalker</h2>
            </div>
            <nav class="sidebar-nav">
                <a class="nav-item active" data-page="dashboard">
                    <span class="nav-icon">üìä</span>
                    Dashboard
                </a>
                <a class="nav-item" data-page="dogs">
                    <span class="nav-icon">üê∂</span>
                    C√£es
                </a>
                <a class="nav-item" data-page="owners">
                    <span class="nav-icon">üë§</span>
                    Donos
                </a>
                <a class="nav-item" data-page="walks">
                    <span class="nav-icon">üö∂</span>
                    Passeios
                </a>
                <a class="nav-item" data-page="trainings">
                    <span class="nav-icon">üéì</span>
                    Adestramento
                </a>
            </nav>
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">üë§</div>
                    <div>
                        <div class="user-name" id="userName">Admin</div>
                        <div class="user-role">Administrador</div>
                    </div>
                </div>
                <button class="btn btn-secondary btn-sm" style="width: 100%;" onclick="logout()">
                    <span>üö™</span> Sair
                </button>
            </div>
        </aside>

        <main class="main-content">
            <!-- Dashboard Page -->
            <section class="page" id="page-dashboard">
                <div class="page-header">
                    <h1 class="page-title">Dashboard <span>/ Vis√£o Geral</span></h1>
                </div>
                <div class="stats-grid" id="statsGrid">
                    <!-- Stats ser√£o carregadas via JS -->
                </div>
            </section>

            <!-- Dogs Page -->
            <section class="page" id="page-dogs" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">C√£es <span>/ Gerenciar Perfis</span></h1>
                    <button class="btn btn-primary" onclick="openDogModal()">
                        <span>‚ûï</span> Novo C√£o
                    </button>
                </div>
                <div class="data-section">
                    <div class="section-header">
                        <h3 class="section-title"><span>üê∂</span> Lista de C√£es</h3>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Ra√ßa</th>
                                <th>Idade</th>
                                <th>Dono</th>
                                <th>Link Perfil</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="dogsTable"></tbody>
                    </table>
                </div>
            </section>

            <!-- Owners Page -->
            <section class="page" id="page-owners" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">Donos <span>/ Gerenciar Clientes</span></h1>
                    <button class="btn btn-primary" onclick="openOwnerModal()">
                        <span>‚ûï</span> Novo Dono
                    </button>
                </div>
                <div class="data-section">
                    <div class="section-header">
                        <h3 class="section-title"><span>üë§</span> Lista de Donos</h3>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Email</th>
                                <th>Telefone</th>
                                <th>Cadastrado em</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="ownersTable"></tbody>
                    </table>
                </div>
            </section>

            <!-- Walks Page -->
            <section class="page" id="page-walks" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">Passeios <span>/ Agendamentos</span></h1>
                    <button class="btn btn-primary" onclick="openWalkModal()">
                        <span>‚ûï</span> Novo Passeio
                    </button>
                </div>
                <div class="data-section">
                    <div class="section-header">
                        <h3 class="section-title"><span>üö∂</span> Lista de Passeios</h3>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>C√£o</th>
                                <th>Data/Hora</th>
                                <th>Dura√ß√£o</th>
                                <th>Local</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="walksTable"></tbody>
                    </table>
                </div>
            </section>

            <!-- Trainings Page -->
            <section class="page" id="page-trainings" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">Adestramento <span>/ Sess√µes</span></h1>
                    <button class="btn btn-primary" onclick="openTrainingModal()">
                        <span>‚ûï</span> Nova Sess√£o
                    </button>
                </div>
                <div class="data-section">
                    <div class="section-header">
                        <h3 class="section-title"><span>üéì</span> Lista de Sess√µes</h3>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>C√£o</th>
                                <th>Tipo</th>
                                <th>Data/Hora</th>
                                <th>Dura√ß√£o</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="trainingsTable"></tbody>
                    </table>
                </div>
            </section>

            <!-- Dog Detail Page -->
            <section class="page" id="page-dog-detail" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title" id="dogDetailTitle">Perfil do C√£o</h1>
                    <button class="btn btn-secondary" onclick="showPage('dogs')">
                        <span>‚Üê</span> Voltar
                    </button>
                </div>
                <div id="dogDetailContent"></div>
            </section>
        </main>
    </div>

    <!-- Pet Public Profile -->
    <div class="pet-profile-container" id="petProfileContainer">
        <div class="pet-profile" id="petProfileContent">
            <!-- Conte√∫do carregado via JS -->
        </div>
    </div>

    <!-- Modals -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal" id="modalContent">
            <!-- Conte√∫do do modal carregado via JS -->
        </div>
    </div>

    <script>
        // ============ CONFIGURA√á√ÉO ============
        const API_URL = '';
        let token = localStorage.getItem('token');
        let currentUser = null;
        let dogs = [];
        let owners = [];
        let walks = [];
        let trainings = [];

        // ============ INICIALIZA√á√ÉO ============
        document.addEventListener('DOMContentLoaded', () => {
            // Verificar se √© p√°gina de perfil p√∫blico
            const path = window.location.pathname;
            if (path.startsWith('/pet/')) {
                const accessCode = path.split('/pet/')[1];
                loadPublicProfile(accessCode);
                return;
            }

            // Verificar autentica√ß√£o
            if (token) {
                checkAuth();
            }

            // Event Listeners
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            
            // Navega√ß√£o
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', () => {
                    const page = item.dataset.page;
                    showPage(page);
                });
            });
        });

        // ============ AUTENTICA√á√ÉO ============
        async function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            try {
                const res = await fetch(`${API_URL}/api/auth/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });

                if (!res.ok) throw new Error('Credenciais inv√°lidas');

                const data = await res.json();
                token = data.access_token;
                localStorage.setItem('token', token);
                await checkAuth();
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        async function checkAuth() {
            try {
                const res = await fetch(`${API_URL}/api/auth/me`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });

                if (!res.ok) throw new Error('Sess√£o expirada');

                currentUser = await res.json();
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('appContainer').classList.add('active');
                loadDashboard();
            } catch (error) {
                logout();
            }
        }

        function logout() {
            token = null;
            currentUser = null;
            localStorage.removeItem('token');
            document.getElementById('loginPage').style.display = 'flex';
            document.getElementById('appContainer').classList.remove('active');
        }

        // ============ NAVEGA√á√ÉO ============
        function showPage(page) {
            document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            
            const pageEl = document.getElementById(`page-${page}`);
            const navEl = document.querySelector(`[data-page="${page}"]`);
            
            if (pageEl) pageEl.style.display = 'block';
            if (navEl) navEl.classList.add('active');

            // Carregar dados da p√°gina
            switch(page) {
                case 'dashboard': loadDashboard(); break;
                case 'dogs': loadDogs(); break;
                case 'owners': loadOwners(); break;
                case 'walks': loadWalks(); break;
                case 'trainings': loadTrainings(); break;
            }
        }

        // ============ DASHBOARD ============
        async function loadDashboard() {
            try {
                const res = await fetch(`${API_URL}/api/stats`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const stats = await res.json();

                document.getElementById('statsGrid').innerHTML = `
                    <div class="stat-card orange">
                        <div class="stat-icon">üê∂</div>
                        <div class="stat-value">${stats.total_dogs}</div>
                        <div class="stat-label">C√£es Cadastrados</div>
                    </div>
                    <div class="stat-card coral">
                        <div class="stat-icon">üë§</div>
                        <div class="stat-value">${stats.total_owners}</div>
                        <div class="stat-label">Donos</div>
                    </div>
                    <div class="stat-card mint">
                        <div class="stat-icon">üö∂</div>
                        <div class="stat-value">${stats.pending_walks}</div>
                        <div class="stat-label">Passeios Agendados</div>
                    </div>
                    <div class="stat-card yellow">
                        <div class="stat-icon">üéì</div>
                        <div class="stat-value">${stats.pending_trainings}</div>
                        <div class="stat-label">Sess√µes Agendadas</div>
                    </div>
                `;
            } catch (error) {
                console.error('Erro ao carregar stats:', error);
            }
        }

        // ============ C√ÉES ============
        async function loadDogs() {
            try {
                const [dogsRes, ownersRes] = await Promise.all([
                    fetch(`${API_URL}/api/dogs`, { headers: { 'Authorization': `Bearer ${token}` } }),
                    fetch(`${API_URL}/api/users`, { headers: { 'Authorization': `Bearer ${token}` } })
                ]);
                
                dogs = await dogsRes.json();
                owners = await ownersRes.json();

                const tbody = document.getElementById('dogsTable');
                tbody.innerHTML = dogs.map(dog => {
                    const owner = owners.find(o => o.id === dog.owner_id);
                    const profileUrl = `${window.location.origin}/pet/${dog.access_code}`;
                    return `
                        <tr>
                            <td><strong>${dog.name}</strong></td>
                            <td>${dog.breed || '-'}</td>
                            <td>${dog.age ? (dog.age >= 12 ? Math.floor(dog.age/12) + ' anos' : dog.age + ' meses') : '-'}</td>
                            <td>${owner ? owner.name : '-'}</td>
                            <td>
                                <div class="copy-link" style="margin: 0;">
                                    <input type="text" value="${profileUrl}" readonly style="padding: 6px 10px; font-size: 11px;">
                                    <button class="btn btn-secondary btn-sm" onclick="copyToClipboard('${profileUrl}')">üìã</button>
                                </div>
                            </td>
                            <td>
                                <div class="action-btns">
                                    <button class="action-btn" onclick="viewDog(${dog.id})" title="Ver">üëÅÔ∏è</button>
                                    <button class="action-btn" onclick="editDog(${dog.id})" title="Editar">‚úèÔ∏è</button>
                                    <button class="action-btn delete" onclick="deleteDog(${dog.id})" title="Excluir">üóëÔ∏è</button>
                                </div>
                            </td>
                        </tr>
                    `;
                }).join('');
            } catch (error) {
                showToast('Erro ao carregar c√£es', 'error');
            }
        }

        function openDogModal(dog = null) {
            const isEdit = !!dog;
            document.getElementById('modalContent').innerHTML = `
                <div class="modal-header">
                    <h3 class="modal-title"><span>üê∂</span> ${isEdit ? 'Editar' : 'Novo'} C√£o</h3>
                    <button class="modal-close" onclick="closeModal()">‚úï</button>
                </div>
                <div class="modal-body">
                    <form id="dogForm">
                        <div class="form-group">
                            <label>Nome *</label>
                            <input type="text" name="name" value="${dog?.name || ''}" required>
                        </div>
                        <div class="form-group">
                            <label>Ra√ßa</label>
                            <input type="text" name="breed" value="${dog?.breed || ''}">
                        </div>
                        <div class="form-group">
                            <label>Idade (meses)</label>
                            <input type="number" name="age" value="${dog?.age || ''}">
                        </div>
                        <div class="form-group">
                            <label>Peso (kg)</label>
                            <input type="number" step="0.1" name="weight" value="${dog?.weight || ''}">
                        </div>
                        <div class="form-group">
                            <label>Dono *</label>
                            <select name="owner_id" required>
                                <option value="">Selecione...</option>
                                ${owners.map(o => `<option value="${o.id}" ${dog?.owner_id === o.id ? 'selected' : ''}>${o.name}</option>`).join('')}
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Descri√ß√£o</label>
                            <textarea name="description">${dog?.description || ''}</textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
                    <button class="btn btn-primary" onclick="saveDog(${dog?.id || 'null'})">
                        <span>üíæ</span> Salvar
                    </button>
                </div>
            `;
            document.getElementById('modalOverlay').classList.add('active');
        }

        async function saveDog(dogId) {
            const form = document.getElementById('dogForm');
            const formData = new FormData(form);
            const data = {
                name: formData.get('name'),
                breed: formData.get('breed') || null,
                age: formData.get('age') ? parseInt(formData.get('age')) : null,
                weight: formData.get('weight') ? parseFloat(formData.get('weight')) : null,
                owner_id: parseInt(formData.get('owner_id')),
                description: formData.get('description') || null
            };

            try {
                const url = dogId ? `${API_URL}/api/dogs/${dogId}` : `${API_URL}/api/dogs`;
                const method = dogId ? 'PUT' : 'POST';
                
                const res = await fetch(url, {
                    method,
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(data)
                });

                if (!res.ok) throw new Error('Erro ao salvar');

                showToast('C√£o salvo com sucesso!', 'success');
                closeModal();
                loadDogs();
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        async function deleteDog(id) {
            if (!confirm('Tem certeza que deseja excluir este c√£o?')) return;

            try {
                await fetch(`${API_URL}/api/dogs/${id}`, {
                    method: 'DELETE',
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                showToast('C√£o exclu√≠do com sucesso!', 'success');
                loadDogs();
            } catch (error) {
                showToast('Erro ao excluir', 'error');
            }
        }

        function editDog(id) {
            const dog = dogs.find(d => d.id === id);
            openDogModal(dog);
        }

        async function viewDog(id) {
            try {
                const res = await fetch(`${API_URL}/api/dogs/${id}`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const dog = await res.json();
                const owner = owners.find(o => o.id === dog.owner_id);

                document.getElementById('dogDetailTitle').textContent = `üê∂ ${dog.name}`;
                document.getElementById('dogDetailContent').innerHTML = `
                    <div class="pet-header" style="text-align: left; display: flex; gap: 30px; align-items: center;">
                        <div class="pet-avatar" style="margin: 0; flex-shrink: 0;">
                            ${dog.photo_url ? `<img src="${dog.photo_url}" alt="${dog.name}">` : 'üêï'}
                        </div>
                        <div style="flex: 1;">
                            <h2 style="font-size: 28px; margin-bottom: 8px;">${dog.name}</h2>
                            <p style="color: var(--text-secondary);">${dog.breed || 'Ra√ßa n√£o informada'}</p>
                            <div style="display: flex; gap: 24px; margin-top: 16px;">
                                <div>
                                    <strong style="color: var(--accent-mint);">${dog.age ? (dog.age >= 12 ? Math.floor(dog.age/12) + ' anos' : dog.age + ' meses') : '-'}</strong>
                                    <span style="color: var(--text-muted); display: block; font-size: 12px;">Idade</span>
                                </div>
                                <div>
                                    <strong style="color: var(--accent-mint);">${dog.weight ? dog.weight + ' kg' : '-'}</strong>
                                    <span style="color: var(--text-muted); display: block; font-size: 12px;">Peso</span>
                                </div>
                                <div>
                                    <strong style="color: var(--accent-mint);">${owner?.name || '-'}</strong>
                                    <span style="color: var(--text-muted); display: block; font-size: 12px;">Dono</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                        <!-- Passeios -->
                        <div class="pet-section">
                            <div class="pet-section-header">üö∂ Passeios</div>
                            <div class="pet-section-body">
                                ${dog.walks.length ? dog.walks.slice(0, 5).map(w => `
                                    <div class="schedule-item">
                                        <div class="schedule-icon">üö∂</div>
                                        <div class="schedule-info">
                                            <div class="schedule-date">${formatDate(w.scheduled_date)}</div>
                                            <div class="schedule-details">${w.duration_minutes} min ‚Ä¢ ${w.location || 'Local n√£o informado'}</div>
                                        </div>
                                        <span class="badge badge-${getStatusClass(w.status)}">${w.status}</span>
                                    </div>
                                `).join('') : '<div class="empty-state"><div class="icon">üö∂</div><p>Nenhum passeio agendado</p></div>'}
                            </div>
                        </div>

                        <!-- Adestramento -->
                        <div class="pet-section">
                            <div class="pet-section-header">üéì Adestramento</div>
                            <div class="pet-section-body">
                                ${dog.trainings.length ? dog.trainings.slice(0, 5).map(t => `
                                    <div class="schedule-item">
                                        <div class="schedule-icon training">üéì</div>
                                        <div class="schedule-info">
                                            <div class="schedule-date">${formatDate(t.scheduled_date)}</div>
                                            <div class="schedule-details">${t.training_type} ‚Ä¢ ${t.duration_minutes} min</div>
                                        </div>
                                        <span class="badge badge-${getStatusClass(t.status)}">${t.status}</span>
                                    </div>
                                `).join('') : '<div class="empty-state"><div class="icon">üéì</div><p>Nenhuma sess√£o agendada</p></div>'}
                            </div>
                        </div>
                    </div>

                    <!-- M√≠dia -->
                    <div class="pet-section" style="margin-top: 20px;">
                        <div class="pet-section-header" style="display: flex; justify-content: space-between;">
                            <span>üì∏ Fotos e V√≠deos</span>
                            <button class="btn btn-secondary btn-sm" onclick="openUploadModal(${dog.id})">
                                <span>‚ûï</span> Adicionar
                            </button>
                        </div>
                        <div class="pet-section-body">
                            ${dog.media.length ? `
                                <div class="media-grid">
                                    ${dog.media.map(m => `
                                        <div class="media-item" onclick="viewMedia('${m.file_path}', '${m.file_type}')">
                                            ${m.file_type === 'image' ? 
                                                `<img src="${m.file_path}" alt="">` : 
                                                `<video src="${m.file_path}"></video><div class="media-play-icon">‚ñ∂Ô∏è</div>`
                                            }
                                        </div>
                                    `).join('')}
                                </div>
                            ` : '<div class="empty-state"><div class="icon">üì∏</div><p>Nenhuma m√≠dia adicionada</p></div>'}
                        </div>
                    </div>
                `;
                
                showPage('dog-detail');
            } catch (error) {
                showToast('Erro ao carregar detalhes', 'error');
            }
        }

        // ============ DONOS ============
        async function loadOwners() {
            try {
                const res = await fetch(`${API_URL}/api/users`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                owners = await res.json();

                document.getElementById('ownersTable').innerHTML = owners.map(owner => `
                    <tr>
                        <td><strong>${owner.name}</strong></td>
                        <td>${owner.email}</td>
                        <td>${owner.phone || '-'}</td>
                        <td>${formatDate(owner.created_at)}</td>
                        <td>
                            <div class="action-btns">
                                <button class="action-btn" onclick="editOwner(${owner.id})" title="Editar">‚úèÔ∏è</button>
                            </div>
                        </td>
                    </tr>
                `).join('');
            } catch (error) {
                showToast('Erro ao carregar donos', 'error');
            }
        }

        function openOwnerModal(owner = null) {
            document.getElementById('modalContent').innerHTML = `
                <div class="modal-header">
                    <h3 class="modal-title"><span>üë§</span> ${owner ? 'Editar' : 'Novo'} Dono</h3>
                    <button class="modal-close" onclick="closeModal()">‚úï</button>
                </div>
                <div class="modal-body">
                    <form id="ownerForm">
                        <div class="form-group">
                            <label>Nome *</label>
                            <input type="text" name="name" value="${owner?.name || ''}" required>
                        </div>
                        <div class="form-group">
                            <label>Email *</label>
                            <input type="email" name="email" value="${owner?.email || ''}" required>
                        </div>
                        <div class="form-group">
                            <label>Telefone</label>
                            <input type="text" name="phone" value="${owner?.phone || ''}">
                        </div>
                        ${!owner ? `
                        <div class="form-group">
                            <label>Senha *</label>
                            <input type="password" name="password" required>
                        </div>
                        ` : ''}
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
                    <button class="btn btn-primary" onclick="saveOwner(${owner?.id || 'null'})">
                        <span>üíæ</span> Salvar
                    </button>
                </div>
            `;
            document.getElementById('modalOverlay').classList.add('active');
        }

        async function saveOwner(ownerId) {
            const form = document.getElementById('ownerForm');
            const formData = new FormData(form);
            const data = {
                name: formData.get('name'),
                email: formData.get('email'),
                phone: formData.get('phone') || null,
                password: formData.get('password') || 'temp123',
                is_admin: false
            };

            try {
                const res = await fetch(`${API_URL}/api/users`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(data)
                });

                if (!res.ok) {
                    const error = await res.json();
                    throw new Error(error.detail || 'Erro ao salvar');
                }

                showToast('Dono salvo com sucesso!', 'success');
                closeModal();
                loadOwners();
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        function editOwner(id) {
            const owner = owners.find(o => o.id === id);
            openOwnerModal(owner);
        }

        // ============ PASSEIOS ============
        async function loadWalks() {
            try {
                const [walksRes, dogsRes] = await Promise.all([
                    fetch(`${API_URL}/api/walks`, { headers: { 'Authorization': `Bearer ${token}` } }),
                    fetch(`${API_URL}/api/dogs`, { headers: { 'Authorization': `Bearer ${token}` } })
                ]);
                
                walks = await walksRes.json();
                dogs = await dogsRes.json();

                document.getElementById('walksTable').innerHTML = walks.map(walk => {
                    const dog = dogs.find(d => d.id === walk.dog_id);
                    return `
                        <tr>
                            <td><strong>${dog?.name || '-'}</strong></td>
                            <td>${formatDate(walk.scheduled_date)}</td>
                            <td>${walk.duration_minutes} min</td>
                            <td>${walk.location || '-'}</td>
                            <td><span class="badge badge-${getStatusClass(walk.status)}">${walk.status}</span></td>
                            <td>
                                <div class="action-btns">
                                    <button class="action-btn" onclick="editWalk(${walk.id})" title="Editar">‚úèÔ∏è</button>
                                    <button class="action-btn delete" onclick="deleteWalk(${walk.id})" title="Excluir">üóëÔ∏è</button>
                                </div>
                            </td>
                        </tr>
                    `;
                }).join('');
            } catch (error) {
                showToast('Erro ao carregar passeios', 'error');
            }
        }

        function openWalkModal(walk = null) {
            document.getElementById('modalContent').innerHTML = `
                <div class="modal-header">
                    <h3 class="modal-title"><span>üö∂</span> ${walk ? 'Editar' : 'Novo'} Passeio</h3>
                    <button class="modal-close" onclick="closeModal()">‚úï</button>
                </div>
                <div class="modal-body">
                    <form id="walkForm">
                        <div class="form-group">
                            <label>C√£o *</label>
                            <select name="dog_id" required ${walk ? 'disabled' : ''}>
                                <option value="">Selecione...</option>
                                ${dogs.map(d => `<option value="${d.id}" ${walk?.dog_id === d.id ? 'selected' : ''}>${d.name}</option>`).join('')}
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Data e Hora *</label>
                            <input type="datetime-local" name="scheduled_date" value="${walk ? formatDateInput(walk.scheduled_date) : ''}" required>
                        </div>
                        <div class="form-group">
                            <label>Dura√ß√£o (minutos)</label>
                            <input type="number" name="duration_minutes" value="${walk?.duration_minutes || 60}">
                        </div>
                        <div class="form-group">
                            <label>Local</label>
                            <input type="text" name="location" value="${walk?.location || ''}">
                        </div>
                        ${walk ? `
                        <div class="form-group">
                            <label>Status</label>
                            <select name="status">
                                <option value="agendado" ${walk.status === 'agendado' ? 'selected' : ''}>Agendado</option>
                                <option value="em_andamento" ${walk.status === 'em_andamento' ? 'selected' : ''}>Em Andamento</option>
                                <option value="concluido" ${walk.status === 'concluido' ? 'selected' : ''}>Conclu√≠do</option>
                                <option value="cancelado" ${walk.status === 'cancelado' ? 'selected' : ''}>Cancelado</option>
                            </select>
                        </div>
                        ` : ''}
                        <div class="form-group">
                            <label>Observa√ß√µes</label>
                            <textarea name="notes">${walk?.notes || ''}</textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
                    <button class="btn btn-primary" onclick="saveWalk(${walk?.id || 'null'})">
                        <span>üíæ</span> Salvar
                    </button>
                </div>
            `;
            document.getElementById('modalOverlay').classList.add('active');
        }

        async function saveWalk(walkId) {
            const form = document.getElementById('walkForm');
            const formData = new FormData(form);
            const data = {
                dog_id: parseInt(formData.get('dog_id')),
                scheduled_date: new Date(formData.get('scheduled_date')).toISOString(),
                duration_minutes: parseInt(formData.get('duration_minutes')) || 60,
                location: formData.get('location') || null,
                notes: formData.get('notes') || null
            };

            if (walkId) {
                data.status = formData.get('status');
                delete data.dog_id;
            }

            try {
                const url = walkId ? `${API_URL}/api/walks/${walkId}` : `${API_URL}/api/walks`;
                const method = walkId ? 'PUT' : 'POST';
                
                const res = await fetch(url, {
                    method,
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(data)
                });

                if (!res.ok) throw new Error('Erro ao salvar');

                showToast('Passeio salvo com sucesso!', 'success');
                closeModal();
                loadWalks();
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        async function deleteWalk(id) {
            if (!confirm('Tem certeza que deseja excluir este passeio?')) return;

            try {
                await fetch(`${API_URL}/api/walks/${id}`, {
                    method: 'DELETE',
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                showToast('Passeio exclu√≠do com sucesso!', 'success');
                loadWalks();
            } catch (error) {
                showToast('Erro ao excluir', 'error');
            }
        }

        function editWalk(id) {
            const walk = walks.find(w => w.id === id);
            openWalkModal(walk);
        }

        // ============ ADESTRAMENTO ============
        async function loadTrainings() {
            try {
                const [trainingsRes, dogsRes] = await Promise.all([
                    fetch(`${API_URL}/api/trainings`, { headers: { 'Authorization': `Bearer ${token}` } }),
                    fetch(`${API_URL}/api/dogs`, { headers: { 'Authorization': `Bearer ${token}` } })
                ]);
                
                trainings = await trainingsRes.json();
                dogs = await dogsRes.json();

                document.getElementById('trainingsTable').innerHTML = trainings.map(training => {
                    const dog = dogs.find(d => d.id === training.dog_id);
                    return `
                        <tr>
                            <td><strong>${dog?.name || '-'}</strong></td>
                            <td>${training.training_type}</td>
                            <td>${formatDate(training.scheduled_date)}</td>
                            <td>${training.duration_minutes} min</td>
                            <td><span class="badge badge-${getStatusClass(training.status)}">${training.status}</span></td>
                            <td>
                                <div class="action-btns">
                                    <button class="action-btn" onclick="editTraining(${training.id})" title="Editar">‚úèÔ∏è</button>
                                    <button class="action-btn delete" onclick="deleteTraining(${training.id})" title="Excluir">üóëÔ∏è</button>
                                </div>
                            </td>
                        </tr>
                    `;
                }).join('');
            } catch (error) {
                showToast('Erro ao carregar sess√µes', 'error');
            }
        }

        function openTrainingModal(training = null) {
            document.getElementById('modalContent').innerHTML = `
                <div class="modal-header">
                    <h3 class="modal-title"><span>üéì</span> ${training ? 'Editar' : 'Nova'} Sess√£o</h3>
                    <button class="modal-close" onclick="closeModal()">‚úï</button>
                </div>
                <div class="modal-body">
                    <form id="trainingForm">
                        <div class="form-group">
                            <label>C√£o *</label>
                            <select name="dog_id" required ${training ? 'disabled' : ''}>
                                <option value="">Selecione...</option>
                                ${dogs.map(d => `<option value="${d.id}" ${training?.dog_id === d.id ? 'selected' : ''}>${d.name}</option>`).join('')}
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Tipo de Adestramento *</label>
                            <select name="training_type" required>
                                <option value="">Selecione...</option>
                                <option value="Obedi√™ncia B√°sica" ${training?.training_type === 'Obedi√™ncia B√°sica' ? 'selected' : ''}>Obedi√™ncia B√°sica</option>
                                <option value="Socializa√ß√£o" ${training?.training_type === 'Socializa√ß√£o' ? 'selected' : ''}>Socializa√ß√£o</option>
                                <option value="Corre√ß√£o Comportamental" ${training?.training_type === 'Corre√ß√£o Comportamental' ? 'selected' : ''}>Corre√ß√£o Comportamental</option>
                                <option value="Truques" ${training?.training_type === 'Truques' ? 'selected' : ''}>Truques</option>
                                <option value="Agilidade" ${training?.training_type === 'Agilidade' ? 'selected' : ''}>Agilidade</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Data e Hora *</label>
                            <input type="datetime-local" name="scheduled_date" value="${training ? formatDateInput(training.scheduled_date) : ''}" required>
                        </div>
                        <div class="form-group">
                            <label>Dura√ß√£o (minutos)</label>
                            <input type="number" name="duration_minutes" value="${training?.duration_minutes || 60}">
                        </div>
                        ${training ? `
                        <div class="form-group">
                            <label>Status</label>
                            <select name="status">
                                <option value="agendado" ${training.status === 'agendado' ? 'selected' : ''}>Agendado</option>
                                <option value="em_andamento" ${training.status === 'em_andamento' ? 'selected' : ''}>Em Andamento</option>
                                <option value="concluido" ${training.status === 'concluido' ? 'selected' : ''}>Conclu√≠do</option>
                                <option value="cancelado" ${training.status === 'cancelado' ? 'selected' : ''}>Cancelado</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Relat√≥rio de Progresso</label>
                            <textarea name="progress_report">${training?.progress_report || ''}</textarea>
                        </div>
                        ` : ''}
                        <div class="form-group">
                            <label>Observa√ß√µes</label>
                            <textarea name="notes">${training?.notes || ''}</textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
                    <button class="btn btn-primary" onclick="saveTraining(${training?.id || 'null'})">
                        <span>üíæ</span> Salvar
                    </button>
                </div>
            `;
            document.getElementById('modalOverlay').classList.add('active');
        }

        async function saveTraining(trainingId) {
            const form = document.getElementById('trainingForm');
            const formData = new FormData(form);
            const data = {
                dog_id: parseInt(formData.get('dog_id')),
                training_type: formData.get('training_type'),
                scheduled_date: new Date(formData.get('scheduled_date')).toISOString(),
                duration_minutes: parseInt(formData.get('duration_minutes')) || 60,
                notes: formData.get('notes') || null
            };

            if (trainingId) {
                data.status = formData.get('status');
                data.progress_report = formData.get('progress_report') || null;
                delete data.dog_id;
            }

            try {
                const url = trainingId ? `${API_URL}/api/trainings/${trainingId}` : `${API_URL}/api/trainings`;
                const method = trainingId ? 'PUT' : 'POST';
                
                const res = await fetch(url, {
                    method,
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(data)
                });

                if (!res.ok) throw new Error('Erro ao salvar');

                showToast('Sess√£o salva com sucesso!', 'success');
                closeModal();
                loadTrainings();
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        async function deleteTraining(id) {
            if (!confirm('Tem certeza que deseja excluir esta sess√£o?')) return;

            try {
                await fetch(`${API_URL}/api/trainings/${id}`, {
                    method: 'DELETE',
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                showToast('Sess√£o exclu√≠da com sucesso!', 'success');
                loadTrainings();
            } catch (error) {
                showToast('Erro ao excluir', 'error');
            }
        }

        function editTraining(id) {
            const training = trainings.find(t => t.id === id);
            openTrainingModal(training);
        }

        // ============ UPLOAD DE M√çDIA ============
        function openUploadModal(dogId) {
            document.getElementById('modalContent').innerHTML = `
                <div class="modal-header">
                    <h3 class="modal-title"><span>üì∏</span> Adicionar M√≠dia</h3>
                    <button class="modal-close" onclick="closeModal()">‚úï</button>
                </div>
                <div class="modal-body">
                    <form id="uploadForm">
                        <div class="form-group">
                            <label class="file-upload" id="fileUploadLabel">
                                <input type="file" name="file" accept="image/*,video/*" onchange="handleFileSelect(this)">
                                <div class="file-upload-icon">üìÅ</div>
                                <div class="file-upload-text">Clique para selecionar uma foto ou v√≠deo</div>
                            </label>
                        </div>
                        <div class="form-group">
                            <label>Legenda</label>
                            <input type="text" name="caption" placeholder="Descreva a foto/v√≠deo...">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
                    <button class="btn btn-primary" onclick="uploadMedia(${dogId})">
                        <span>üì§</span> Enviar
                    </button>
                </div>
            `;
            document.getElementById('modalOverlay').classList.add('active');
        }

        function handleFileSelect(input) {
            const file = input.files[0];
            if (file) {
                document.getElementById('fileUploadLabel').querySelector('.file-upload-text').textContent = file.name;
            }
        }

        async function uploadMedia(dogId) {
            const form = document.getElementById('uploadForm');
            const formData = new FormData(form);
            
            const file = formData.get('file');
            if (!file || !file.name) {
                showToast('Selecione um arquivo', 'error');
                return;
            }

            try {
                const res = await fetch(`${API_URL}/api/dogs/${dogId}/media`, {
                    method: 'POST',
                    headers: { 'Authorization': `Bearer ${token}` },
                    body: formData
                });

                if (!res.ok) throw new Error('Erro ao enviar');

                showToast('M√≠dia enviada com sucesso!', 'success');
                closeModal();
                viewDog(dogId);
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        // ============ PERFIL P√öBLICO ============
        async function loadPublicProfile(accessCode) {
            try {
                const res = await fetch(`${API_URL}/api/public/dog/${accessCode}`);
                if (!res.ok) throw new Error('Perfil n√£o encontrado');
                
                const dog = await res.json();
                
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('petProfileContainer').classList.add('active');

                document.getElementById('petProfileContent').innerHTML = `
                    <div class="pet-header">
                        <div class="pet-avatar">
                            ${dog.photo_url ? `<img src="${dog.photo_url}" alt="${dog.name}">` : 'üêï'}
                        </div>
                        <h1 class="pet-name">${dog.name}</h1>
                        <p class="pet-breed">${dog.breed || 'Ra√ßa n√£o informada'}</p>
                        <div class="pet-details">
                            <div class="pet-detail">
                                <div class="pet-detail-value">${dog.age ? (dog.age >= 12 ? Math.floor(dog.age/12) : dog.age) : '-'}</div>
                                <div class="pet-detail-label">${dog.age && dog.age >= 12 ? 'Anos' : 'Meses'}</div>
                            </div>
                            <div class="pet-detail">
                                <div class="pet-detail-value">${dog.weight || '-'}</div>
                                <div class="pet-detail-label">Peso (kg)</div>
                            </div>
                        </div>
                        ${dog.description ? `<p style="margin-top: 20px; color: var(--text-secondary);">${dog.description}</p>` : ''}
                    </div>

                    <!-- Pr√≥ximos Passeios -->
                    <div class="pet-section">
                        <div class="pet-section-header">üö∂ Pr√≥ximos Passeios</div>
                        <div class="pet-section-body">
                            ${dog.walks.filter(w => w.status === 'agendado').length ? 
                                dog.walks.filter(w => w.status === 'agendado').slice(0, 5).map(w => `
                                    <div class="schedule-item">
                                        <div class="schedule-icon">üö∂</div>
                                        <div class="schedule-info">
                                            <div class="schedule-date">${formatDate(w.scheduled_date)}</div>
                                            <div class="schedule-details">${w.duration_minutes} minutos ‚Ä¢ ${w.location || 'Local a definir'}</div>
                                        </div>
                                    </div>
                                `).join('') : 
                                '<div class="empty-state"><div class="icon">üö∂</div><p>Nenhum passeio agendado</p></div>'
                            }
                        </div>
                    </div>

                    <!-- Sess√µes de Adestramento -->
                    <div class="pet-section">
                        <div class="pet-section-header">üéì Sess√µes de Adestramento</div>
                        <div class="pet-section-body">
                            ${dog.trainings.filter(t => t.status === 'agendado').length ?
                                dog.trainings.filter(t => t.status === 'agendado').slice(0, 5).map(t => `
                                    <div class="schedule-item">
                                        <div class="schedule-icon training">üéì</div>
                                        <div class="schedule-info">
                                            <div class="schedule-date">${formatDate(t.scheduled_date)}</div>
                                            <div class="schedule-details">${t.training_type} ‚Ä¢ ${t.duration_minutes} minutos</div>
                                        </div>
                                    </div>
                                `).join('') :
                                '<div class="empty-state"><div class="icon">üéì</div><p>Nenhuma sess√£o agendada</p></div>'
                            }
                        </div>
                    </div>

                    <!-- Galeria -->
                    <div class="pet-section">
                        <div class="pet-section-header">üì∏ Galeria de Fotos e V√≠deos</div>
                        <div class="pet-section-body">
                            ${dog.media.length ? `
                                <div class="media-grid">
                                    ${dog.media.map(m => `
                                        <div class="media-item" onclick="viewMedia('${m.file_path}', '${m.file_type}')">
                                            ${m.file_type === 'image' ? 
                                                `<img src="${m.file_path}" alt="${m.caption || ''}">` : 
                                                `<video src="${m.file_path}"></video><div class="media-play-icon">‚ñ∂Ô∏è</div>`
                                            }
                                        </div>
                                    `).join('')}
                                </div>
                            ` : '<div class="empty-state"><div class="icon">üì∏</div><p>Nenhuma m√≠dia dispon√≠vel ainda</p></div>'}
                        </div>
                    </div>

                    <p style="text-align: center; color: var(--text-muted); margin-top: 30px; font-size: 13px;">
                        üêï PetWalker - Gest√£o de Passeios e Adestramento
                    </p>
                `;
            } catch (error) {
                document.getElementById('petProfileContainer').classList.add('active');
                document.getElementById('petProfileContent').innerHTML = `
                    <div class="pet-header" style="text-align: center;">
                        <div style="font-size: 80px; margin-bottom: 20px;">üòï</div>
                        <h1 class="pet-name">Perfil n√£o encontrado</h1>
                        <p style="color: var(--text-secondary);">O c√≥digo de acesso informado n√£o existe ou foi removido.</p>
                    </div>
                `;
            }
        }

        // ============ UTILIT√ÅRIOS ============
        function closeModal() {
            document.getElementById('modalOverlay').classList.remove('active');
        }

        function showToast(message, type = 'info') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <span>${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}</span>
                <span>${message}</span>
            `;
            container.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleString('pt-BR', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function formatDateInput(dateStr) {
            const date = new Date(dateStr);
            return date.toISOString().slice(0, 16);
        }

        function getStatusClass(status) {
            const classes = {
                'agendado': 'warning',
                'em_andamento': 'info',
                'concluido': 'success',
                'cancelado': 'danger'
            };
            return classes[status] || 'info';
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text);
            showToast('Link copiado!', 'success');
        }

        function viewMedia(path, type) {
            document.getElementById('modalContent').innerHTML = `
                <div class="modal-header">
                    <h3 class="modal-title">${type === 'image' ? 'üì∏ Foto' : 'üé¨ V√≠deo'}</h3>
                    <button class="modal-close" onclick="closeModal()">‚úï</button>
                </div>
                <div class="modal-body" style="text-align: center;">
                    ${type === 'image' ? 
                        `<img src="${path}" style="max-width: 100%; border-radius: 8px;">` :
                        `<video src="${path}" controls style="max-width: 100%; border-radius: 8px;"></video>`
                    }
                </div>
            `;
            document.getElementById('modalOverlay').classList.add('active');
        }

        // Fechar modal ao clicar fora
        document.getElementById('modalOverlay').addEventListener('click', (e) => {
            if (e.target.id === 'modalOverlay') closeModal();
        });
    </script>
</body>
</html>

